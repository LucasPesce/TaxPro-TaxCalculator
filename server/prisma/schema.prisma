generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// --- MODELO DE VENTAS ---
model FacturaVenta {
  id              Int     @id @default(autoincrement())
  cuitCliente     String
  nombreEmpresa   String
  cliente         String
  condicionIva    String
  tipoDocumento   String
  numeroDocumento Float
  fecha           String
  numeroFactura   String
  montoGravado    Float
  iva21           Float
  percIIBB        Float
  percMun         Float
  total           Float
  provincia       String
}

// --- MODELO DE COMPRAS ---
model FacturaCompra {
  id               Int     @id @default(autoincrement())
  cuitEmpresa      String
  nombreEmpresa    String
  
  proveedor        String
  cuitProveedor    String
  condicionIva     String
  tipoDocumento    String
  numeroFactura    String
  
  fechaEmision     String
  fechaImputacion  String
  
  provincia        String
  jurisdiccion     String
  
  clasificacion    String
  
  montoGravado     Float   @default(0)
  exento           Float   @default(0)
  percIva          Float   @default(0)
  percIIBB         Float   @default(0)
  percMun          Float   @default(0)
  ganancias        Float   @default(0)
  iva27            Float   @default(0)
  iva21            Float   @default(0)
  iva105           Float   @default(0)
  otrasRetenciones Float   @default(0)
  total            Float   @default(0)
}

// --- MODELO DE AUDITORÍA ---
model Auditoria {
  idProceso      Int      @id @default(autoincrement())
  idUsuario      String   @default("01")
  idDocumento    Int
  cuitEmpresa    String
  nroDocumento   String
  modificacion   String
  estadoProceso  String
  tipoOperacion  String
  fechaRegistro  DateTime @default(now())

  // RELACIÓN: Un registro de auditoría puede estar asociado a una factura de venta (pero no es obligatorio)
  // Deshabilitamos temporalmente la relación para simplificar el schema y evitar errores si se borra una factura.
  // facturaVenta   FacturaVenta? @relation(fields: [idDocumento], references: [id])
}